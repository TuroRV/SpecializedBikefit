<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<?import javafx.scene.layout.Pane?>
<BorderPane xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            stylesheets="@../../../styles/styles.css"
            fx:controller="com.dam.specializedbikefit.Controllers.GarageController">

    <center>
        <HBox spacing="20" styleClass="main-content">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <VBox HBox.hgrow="ALWAYS" spacing="10">
                <Label text="Mis Bicicletas"/>

                <TableView fx:id="garageTable" VBox.vgrow="ALWAYS">
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                    <columns>
                        <TableColumn fx:id="brandColumn" text="Marca" />
                        <TableColumn fx:id="modelColumn" text="Modelo" />
                        <TableColumn fx:id="sizeColumn" text="Talla" />
                        <TableColumn fx:id="yearColumn" text="Año" />
                        <TableColumn fx:id="reachColumn" text="Reach" />
                        <TableColumn fx:id="stackColumn" text="Stack" />
                        <TableColumn fx:id="seatTubeColumn" text="Seat Tube" />
                        <TableColumn fx:id="topTubeColumn" text="Top Tube" />
                        <TableColumn fx:id="bikeIsEbikeColumn" text="E-Bike" />
                    </columns>
                </TableView>
                <HBox alignment="CENTER_RIGHT" spacing="20">
                    <Button text="Volver"
                            styleClass="btn, btn-secondary"
                            onAction="#goToMenu"/>

                    <Button text="Eliminar Seleccionada"
                            styleClass="btn, btn-secondary"
                            onAction="#deleteBicycle"/>
                </HBox>
            </VBox>

            <VBox prefWidth="340" styleClass="card">
                <Label text="Nueva Bicicleta" styleClass="card-title">
                    <VBox.margin>
                        <Insets bottom="10"/>
                    </VBox.margin>
                </Label>

                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;" VBox.vgrow="ALWAYS">
                    <content>
                        <VBox spacing="15" style="-fx-padding: 0 5 0 0;">

                            <VBox spacing="5">
                                <Label text="Datos Generales" styleClass="form-label"/>
                                <HBox spacing="10">
                                    <TextField fx:id="brandField" promptText="Marca" HBox.hgrow="ALWAYS"/>
                                    <TextField fx:id="modelField" promptText="Modelo" HBox.hgrow="ALWAYS"/>
                                </HBox>
                                <TextField fx:id="yearField" promptText="Año (Ej: 2025)"/>
                            </VBox>

                            <VBox spacing="5">
                                <Label text="Talla del cuadro" styleClass="form-label"/>
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <RadioButton text="S1" fx:id="radioS1">
                                        <toggleGroup>
                                            <ToggleGroup fx:id="sizeGroup"/>
                                        </toggleGroup>
                                    </RadioButton>
                                    <RadioButton text="S2" toggleGroup="$sizeGroup" fx:id="radioS2"/>
                                    <RadioButton text="S3" toggleGroup="$sizeGroup" fx:id="radioS3"/>
                                    <RadioButton text="S4" toggleGroup="$sizeGroup" fx:id="radioS4"/>
                                    <RadioButton text="S5" toggleGroup="$sizeGroup" fx:id="radioS5"/>
                                </HBox>
                            </VBox>

                            <CheckBox fx:id="isEbikeCheck" text="Es E-Bike (Eléctrica)" style="-fx-font-weight: bold;"/>

                            <Label styleClass="section-separator" text="Geometría (mm)"/>

                            <VBox spacing="2">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Reach:" styleClass="form-label"/>
                                    <Label fx:id="reachValueLabel" text="450 mm" style="-fx-text-fill: #d32f2f;"/>
                                </HBox>
                                <Slider fx:id="reachSlider" min="350" max="550" value="450"/>
                            </VBox>

                            <VBox spacing="2">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Stack:" styleClass="form-label"/>
                                    <Label fx:id="stackValueLabel" text="600 mm" style="-fx-text-fill: #d32f2f;"/>
                                </HBox>
                                <Slider fx:id="stackSlider" min="500" max="700" value="600"/>
                            </VBox>

                            <VBox spacing="2">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Seat Tube:" styleClass="form-label"/>
                                    <Label fx:id="seatTubeValueLabel" text="420 mm" style="-fx-text-fill: #d32f2f;"/>
                                </HBox>
                                <Slider fx:id="seatTubeSlider" min="350" max="550" value="420"/>
                            </VBox>

                            <VBox spacing="2">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Top Tube:" styleClass="form-label"/>
                                    <Label fx:id="topTubeValueLabel" text="580 mm" style="-fx-text-fill: #d32f2f;"/>
                                </HBox>
                                <Slider fx:id="topTubeSlider" min="500" max="700" value="580"/>
                            </VBox>

                            <Pane prefHeight="10"/>
                        </VBox>
                    </content>
                </ScrollPane>

                <HBox spacing="10" alignment="CENTER">
                    <Button text="Borrar campos"
                            styleClass="btn, btn-secondary"
                            maxWidth="Infinity" HBox.hgrow="ALWAYS"
                            onAction="#clearForm"/>

                    <Button fx:id="actionBtn"
                            text="Añadir al Garaje"
                            maxWidth="Infinity" HBox.hgrow="ALWAYS"
                            styleClass="btn, btn-primary"
                            onAction="#saveOrUpdateBicycle"/>
                </HBox>

            </VBox>
        </HBox>
    </center>
</BorderPane>